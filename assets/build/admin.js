(()=>{var e={942:(e,t)=>{var a;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=n(e,l(a)))}return e}function l(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)r.call(e,a)&&e[a]&&(t=n(t,a));return t}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(a=function(){return s}.apply(t,[]))||(e.exports=a)}()}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.element,r=window.wp.apiFetch;var s=a.n(r);const l=window.wp.i18n,n=window.wp.components;var i=a(942),c=a.n(i);function o({status:t,storeId:a}){const r={connected:{color:"green",icon:"●",label:(0,l.__)("Connected","reviewapp-reviews")},disconnected:{color:"gray",icon:"●",label:(0,l.__)("Not Connected","reviewapp-reviews")},error:{color:"red",icon:"●",label:(0,l.__)("Connection Error","reviewapp-reviews")}},s=r[t]||r.disconnected;return(0,e.createElement)("span",{className:c()("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium",{"bg-green-100 text-green-800":"green"===s.color,"bg-gray-100 text-gray-800":"gray"===s.color,"bg-red-100 text-red-800":"red"===s.color})},(0,e.createElement)("span",{className:"text-xs"},s.icon),s.label)}function d({settings:t,onSave:a,saving:r}){const s=!!t?.store_token;return(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},(0,e.createElement)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gray-50 flex items-center justify-between"},(0,e.createElement)("h2",{className:"text-xl font-semibold text-gray-900"},(0,l.__)("Connection","reviewapp-reviews")),(0,e.createElement)(o,{status:t?.connection_status,storeId:t?.store_id})),(0,e.createElement)("div",{className:"px-6 py-5 space-y-6"},s?(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex items-start"},(0,e.createElement)("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("h3",{className:"text-sm font-medium text-green-800"},(0,l.__)("Your store is connected","reviewapp-reviews")),t.store_id&&(0,e.createElement)("p",{className:"text-sm text-green-700 mt-1"},(0,l.__)("Store ID:","reviewapp-reviews")," ",(0,e.createElement)("code",{className:"font-mono"},t.store_id))))),(0,e.createElement)("button",{type:"button",onClick:async()=>{if(confirm((0,l.__)("Are you sure you want to disconnect from ReviewApp?","reviewapp-reviews")))try{await a({store_token:""})}catch(e){}},disabled:r,className:"inline-flex items-center justify-center px-4 py-2 bg-red-50 hover:bg-red-100 text-red-700 text-sm border border-red-200 hover:border-red-300 rounded shadow-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",style:{boxShadow:"none"}},(0,l.__)("Disconnect","reviewapp-reviews"))):(0,e.createElement)("div",{className:"text-center py-8"},(0,e.createElement)("div",{className:"mx-auto w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mb-4"},(0,e.createElement)("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,e.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"}))),(0,e.createElement)("h3",{className:"text-lg font-medium text-gray-900 mb-2"},(0,l.__)("Connect to ReviewApp","reviewapp-reviews")),(0,e.createElement)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto"},(0,l.__)("Start collecting and displaying reviews by connecting your store to ReviewApp","reviewapp-reviews")),(0,e.createElement)(n.Button,{variant:"primary",onClick:()=>{const e=document.createElement("form");e.method="POST",e.action=window.reviewappAdmin?.ajaxUrl||"/wp-admin/admin-ajax.php";const a=document.createElement("input");a.type="hidden",a.name="action",a.value="reviewapp_start_oauth",e.appendChild(a);const r=document.createElement("input");r.type="hidden",r.name="nonce",r.value=t?.oauth_nonce||"",e.appendChild(r),document.body.appendChild(e),e.submit()},className:"!bg-indigo-600 hover:!bg-indigo-700 !text-white !px-8 !py-3 !text-base !h-auto !font-medium"},(0,l.__)("Connect Now","reviewapp-reviews")))))}function m({isConnected:a}){const[r,n]=(0,t.useState)(null),[i,c]=(0,t.useState)(!0),[o,d]=(0,t.useState)(!1),[m,v]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(a){u();const e=setInterval(()=>{r?.is_syncing&&u()},2e3);return()=>clearInterval(e)}},[a,r?.is_syncing]);const u=async()=>{try{const e=await s()({path:"/reviewapp/v1/sync/status"});n(e),v(null)}catch(e){console.error("Failed to load sync status:",e),v(e.message||(0,l.__)("Failed to load sync status","reviewapp-reviews"))}finally{c(!1)}};if(!a)return null;if(i)return(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},(0,e.createElement)("div",{className:"animate-pulse"},(0,e.createElement)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,e.createElement)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})));const p=r?.total_products>0?Math.round(r.synced_products/r.total_products*100):0;return(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},(0,e.createElement)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gray-50"},(0,e.createElement)("h2",{className:"text-xl font-semibold text-gray-900"},(0,l.__)("Product Sync","reviewapp-reviews"))),(0,e.createElement)("div",{className:"px-6 py-5 space-y-6"},m&&(0,e.createElement)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-red-800"},m)))),r?.is_syncing?(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("div",{className:"flex items-center justify-between text-sm"},(0,e.createElement)("span",{className:"font-medium text-gray-700"},(0,l.__)("Syncing products...","reviewapp-reviews")),(0,e.createElement)("span",{className:"text-gray-600"},r.synced_products," / ",r.total_products)),(0,e.createElement)("div",{className:"relative"},(0,e.createElement)("div",{className:"overflow-hidden h-4 text-xs flex rounded bg-gray-200"},(0,e.createElement)("div",{style:{width:`${p}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-indigo-600 transition-all duration-500"})),(0,e.createElement)("div",{className:"text-center mt-2 text-sm font-medium text-gray-700"},p,"%")),(0,e.createElement)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 animate-spin",fill:"none",viewBox:"0 0 24 24"},(0,e.createElement)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,e.createElement)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-blue-800"},(0,l.__)("Sync in progress. This may take a few minutes...","reviewapp-reviews")))))):(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("div",{className:"grid grid-cols-3 gap-4"},(0,e.createElement)("div",{className:"bg-gray-50 rounded-lg p-4"},(0,e.createElement)("div",{className:"text-2xl font-bold text-gray-900"},r?.total_products||0),(0,e.createElement)("div",{className:"text-sm text-gray-600"},(0,l.__)("Products with reviews","reviewapp-reviews"))),(0,e.createElement)("div",{className:"bg-green-50 rounded-lg p-4"},(0,e.createElement)("div",{className:"text-2xl font-bold text-green-900"},r?.synced_products||0),(0,e.createElement)("div",{className:"text-sm text-green-700"},(0,l.__)("Synced","reviewapp-reviews"))),r?.failed_products>0&&(0,e.createElement)("div",{className:"bg-red-50 rounded-lg p-4"},(0,e.createElement)("div",{className:"text-2xl font-bold text-red-900"},r.failed_products),(0,e.createElement)("div",{className:"text-sm text-red-700"},(0,l.__)("Failed","reviewapp-reviews")))),r?.last_sync&&(0,e.createElement)("p",{className:"text-sm text-gray-600"},(0,l.__)("Last synced:","reviewapp-reviews")," ",new Date(1e3*r.last_sync).toLocaleString()),r?.needs_sync?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("h3",{className:"text-sm font-medium text-yellow-800"},(0,l.__)("Sync Required","reviewapp-reviews")),(0,e.createElement)("p",{className:"text-sm text-yellow-700 mt-1"},(0,l.__)("You have products with reviews that need to be synced to ReviewApp.","reviewapp-reviews"))))),(0,e.createElement)("button",{type:"button",onClick:async()=>{d(!0),v(null);try{await s()({path:"/reviewapp/v1/sync/start",method:"POST"}),await u()}catch(e){v(e.message||(0,l.__)("Failed to start sync","reviewapp-reviews"))}finally{d(!1)}},disabled:o||0===r?.total_products,className:"inline-flex items-center justify-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm border border-transparent rounded shadow-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},o?(0,l.__)("Starting sync...","reviewapp-reviews"):(0,l.__)("Sync Products","reviewapp-reviews"))):(0,e.createElement)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-green-800"},(0,l.__)("All products are synced","reviewapp-reviews"))))))))}function v({isConnected:a,productsAreSynced:r}){const[n,i]=(0,t.useState)(null),[c,o]=(0,t.useState)(!0),[d,m]=(0,t.useState)(!1),[v,u]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(a){p();const e=setInterval(()=>{n?.is_syncing&&p()},2e3);return()=>clearInterval(e)}},[a,n?.is_syncing]);const p=async()=>{try{const e=await s()({path:"/reviewapp/v1/sync/reviews/status"});i(e),u(null)}catch(e){console.error("Failed to load review sync status:",e),u(e.message||(0,l.__)("Failed to load review sync status","reviewapp-reviews"))}finally{o(!1)}};if(!a)return null;if(c)return(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},(0,e.createElement)("div",{className:"animate-pulse"},(0,e.createElement)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,e.createElement)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})));const w=n?.total_reviews>0?Math.round(n.synced_reviews/n.total_reviews*100):0,g=!r||d||0===n?.total_reviews;return(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},(0,e.createElement)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gray-50"},(0,e.createElement)("h2",{className:"text-xl font-semibold text-gray-900"},(0,l.__)("Review Sync","reviewapp-reviews"))),(0,e.createElement)("div",{className:"px-6 py-5 space-y-6"},!r&&(0,e.createElement)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("h3",{className:"text-sm font-medium text-yellow-800"},(0,l.__)("Products Must Be Synced First","reviewapp-reviews")),(0,e.createElement)("p",{className:"text-sm text-yellow-700 mt-1"},(0,l.__)("Please sync your products before syncing reviews. Reviews are linked to products.","reviewapp-reviews"))))),v&&(0,e.createElement)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-red-800"},v)))),n?.is_syncing?(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("div",{className:"flex items-center justify-between text-sm"},(0,e.createElement)("span",{className:"font-medium text-gray-700"},(0,l.__)("Syncing reviews...","reviewapp-reviews")),(0,e.createElement)("span",{className:"text-gray-600"},n.synced_reviews," / ",n.total_reviews)),(0,e.createElement)("div",{className:"relative"},(0,e.createElement)("div",{className:"overflow-hidden h-4 text-xs flex rounded bg-gray-200"},(0,e.createElement)("div",{style:{width:`${w}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-indigo-600 transition-all duration-500"})),(0,e.createElement)("div",{className:"text-center mt-2 text-sm font-medium text-gray-700"},w,"%")),(0,e.createElement)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 animate-spin",fill:"none",viewBox:"0 0 24 24"},(0,e.createElement)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,e.createElement)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-blue-800"},(0,l.__)("Sync in progress. This may take a few minutes...","reviewapp-reviews")))))):(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("div",{className:"grid grid-cols-3 gap-4"},(0,e.createElement)("div",{className:"bg-gray-50 rounded-lg p-4"},(0,e.createElement)("div",{className:"text-2xl font-bold text-gray-900"},n?.total_reviews||0),(0,e.createElement)("div",{className:"text-sm text-gray-600"},(0,l.__)("Approved reviews","reviewapp-reviews"))),(0,e.createElement)("div",{className:"bg-green-50 rounded-lg p-4"},(0,e.createElement)("div",{className:"text-2xl font-bold text-green-900"},n?.synced_reviews||0),(0,e.createElement)("div",{className:"text-sm text-green-700"},(0,l.__)("Synced","reviewapp-reviews"))),n?.failed_reviews>0&&(0,e.createElement)("div",{className:"bg-red-50 rounded-lg p-4"},(0,e.createElement)("div",{className:"text-2xl font-bold text-red-900"},n.failed_reviews),(0,e.createElement)("div",{className:"text-sm text-red-700"},(0,l.__)("Failed","reviewapp-reviews")))),n?.last_sync&&(0,e.createElement)("p",{className:"text-sm text-gray-600"},(0,l.__)("Last synced:","reviewapp-reviews")," ",new Date(1e3*n.last_sync).toLocaleString()),n?.needs_sync&&r?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("h3",{className:"text-sm font-medium text-yellow-800"},(0,l.__)("Sync Required","reviewapp-reviews")),(0,e.createElement)("p",{className:"text-sm text-yellow-700 mt-1"},(0,l.__)("You have approved reviews that need to be synced to ReviewApp.","reviewapp-reviews"))))),(0,e.createElement)("button",{type:"button",onClick:async()=>{m(!0),u(null);try{await s()({path:"/reviewapp/v1/sync/reviews/start",method:"POST"}),await p()}catch(e){u(e.message||(0,l.__)("Failed to start review sync","reviewapp-reviews"))}finally{m(!1)}},disabled:g,className:"inline-flex items-center justify-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm border border-transparent rounded shadow-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},d?(0,l.__)("Starting sync...","reviewapp-reviews"):(0,l.__)("Sync Reviews","reviewapp-reviews"))):r&&!n?.needs_sync?(0,e.createElement)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-green-800"},(0,l.__)("All reviews are synced","reviewapp-reviews"))))):null,!r&&(0,e.createElement)("p",{className:"text-xs text-gray-500"},(0,l.__)("Sync products first to enable review sync","reviewapp-reviews")))))}function u({settings:a,onSave:r,saving:s,isConnected:n}){const[i,c]=(0,t.useState)({review_requests_enabled:a?.review_requests_enabled||!1,review_request_trigger_status:a?.review_request_trigger_status||"completed"});return n?(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},(0,e.createElement)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gray-50"},(0,e.createElement)("h2",{className:"text-xl font-semibold text-gray-900"},(0,l.__)("Review Requests","reviewapp-reviews"))),(0,e.createElement)("div",{className:"px-6 py-5 space-y-6"},(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("div",{className:"flex items-start justify-between"},(0,e.createElement)("div",{className:"flex-1"},(0,e.createElement)("label",{htmlFor:"review-requests-enabled",className:"block text-sm font-medium text-gray-900 mb-1"},(0,l.__)("Enable Review Requests","reviewapp-reviews")),(0,e.createElement)("p",{className:"text-sm text-gray-600"},(0,l.__)("Automatically send review request emails to customers after their orders are fulfilled","reviewapp-reviews"))),(0,e.createElement)("div",{className:"ml-4 flex-shrink-0"},(0,e.createElement)("button",{type:"button",role:"switch","aria-checked":i.review_requests_enabled,id:"review-requests-enabled",onClick:async e=>{const t=e.target.checked;c({...i,review_requests_enabled:t});try{await r({review_requests_enabled:t})}catch(e){c({...i,review_requests_enabled:!t})}},disabled:s,className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed "+(i.review_requests_enabled?"bg-indigo-600":"bg-gray-200")},(0,e.createElement)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out "+(i.review_requests_enabled?"translate-x-5":"translate-x-0")})))),i.review_requests_enabled&&(0,e.createElement)("div",{className:"pt-4 border-t border-gray-200"},(0,e.createElement)("label",{htmlFor:"trigger-status",className:"block text-sm font-medium text-gray-900 mb-2"},(0,l.__)("Trigger Status","reviewapp-reviews")),(0,e.createElement)("p",{className:"text-sm text-gray-600 mb-3"},(0,l.__)("Select which order status should trigger review request emails to be scheduled","reviewapp-reviews")),(0,e.createElement)("select",{id:"trigger-status",value:i.review_request_trigger_status,onChange:async e=>{const t=e.target.value;c({...i,review_request_trigger_status:t});try{await r({review_request_trigger_status:t})}catch(e){c({...i,review_request_trigger_status:a?.review_request_trigger_status||"completed"})}},disabled:s,className:"block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},a?.available_order_statuses&&Object.entries(a.available_order_statuses).map(([t,a])=>(0,e.createElement)("option",{key:t,value:t},a))),(0,e.createElement)("p",{className:"mt-2 text-xs text-gray-500"},(0,l.__)("When an order reaches this status, a review request email will be scheduled","reviewapp-reviews"))),i.review_requests_enabled&&(0,e.createElement)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("h3",{className:"text-sm font-medium text-blue-800"},(0,l.__)("How it works","reviewapp-reviews")),(0,e.createElement)("div",{className:"mt-2 text-sm text-blue-700"},(0,e.createElement)("ul",{className:"list-disc pl-5 space-y-1"},(0,e.createElement)("li",null,(0,l.__)("Review requests are sent a few days after the order is fulfilled","reviewapp-reviews")),(0,e.createElement)("li",null,(0,l.__)("Customers can review up to 3 products per email","reviewapp-reviews")),(0,e.createElement)("li",null,(0,l.__)("Reminder emails are sent automatically if no review is submitted","reviewapp-reviews")),(0,e.createElement)("li",null,(0,l.__)("Products already reviewed are excluded from future reminders","reviewapp-reviews")))))))))):null}function p(){return(0,e.createElement)("div",{className:"flex items-center justify-center min-h-screen"},(0,e.createElement)("div",{className:"text-center"},(0,e.createElement)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),(0,e.createElement)("p",{className:"mt-4 text-gray-600"},(0,l.__)("Loading...","reviewapp-reviews"))))}function w(){const[a,r]=(0,t.useState)(null),[n,i]=(0,t.useState)(null),[c,o]=(0,t.useState)(!0),[w,g]=(0,t.useState)(!1),[y,x]=(0,t.useState)(null);(0,t.useEffect)(()=>{f(),b()},[]);const b=async()=>{try{const e=await s()({path:"/reviewapp/v1/sync/status"});i(e)}catch(e){console.error("Failed to load product sync status:",e)}},f=async()=>{try{const e=await s()({path:"/reviewapp/v1/settings"});r(e),x(null)}catch(e){console.error("Failed to load settings:",e),x(e.message||(0,l.__)("Failed to load settings","reviewapp-reviews"))}finally{o(!1)}},_=async e=>{g(!0),x(null);try{const t=await s()({path:"/reviewapp/v1/settings",method:"POST",data:e});r(t)}catch(e){throw x(e.message||(0,l.__)("Failed to save settings","reviewapp-reviews")),e}finally{g(!1)}};return c?(0,e.createElement)(p,null):(0,e.createElement)("div",{className:"max-w-4xl mx-auto py-8"},(0,e.createElement)("header",{className:"mb-8"},(0,e.createElement)("h1",{className:"text-3xl font-bold text-gray-900"},(0,l.__)("ReviewApp Settings","reviewapp-reviews")),(0,e.createElement)("p",{className:"mt-2 text-gray-600"},(0,l.__)("Connect your WooCommerce store to ReviewApp for advanced review collection and display.","reviewapp-reviews"))),y&&(0,e.createElement)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-red-800"},y)))),(0,e.createElement)("div",{className:"space-y-6"},(0,e.createElement)(d,{settings:a,onSave:_,saving:w}),(0,e.createElement)(m,{isConnected:"connected"===a?.connection_status}),(0,e.createElement)(v,{isConnected:"connected"===a?.connection_status,productsAreSynced:n&&!n.needs_sync}),(0,e.createElement)(u,{settings:a,onSave:_,saving:w,isConnected:"connected"===a?.connection_status})))}document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("reviewapp-settings-root");a&&(0,t.render)((0,e.createElement)(w,null),a)})})()})();