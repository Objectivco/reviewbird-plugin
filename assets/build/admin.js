(()=>{var e={942:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=s(e,o(r)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=s(t,r));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wp.apiFetch;var a=r.n(n);const o=window.wp.i18n,s=window.wp.components;var i=r(942),l=r.n(i);function c({status:t,storeId:r}){const n={connected:{color:"green",icon:"●",label:(0,o.__)("Connected","reviewapp-reviews")},disconnected:{color:"gray",icon:"●",label:(0,o.__)("Not Connected","reviewapp-reviews")},error:{color:"red",icon:"●",label:(0,o.__)("Connection Error","reviewapp-reviews")}},a=n[t]||n.disconnected;return(0,e.createElement)("span",{className:l()("inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium",{"bg-green-100 text-green-800":"green"===a.color,"bg-gray-100 text-gray-800":"gray"===a.color,"bg-red-100 text-red-800":"red"===a.color})},(0,e.createElement)("span",{className:"text-xs"},a.icon),a.label)}function d({settings:t,onSave:r,saving:n}){const a=!!t?.store_token;return(0,e.createElement)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},(0,e.createElement)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gray-50 flex items-center justify-between"},(0,e.createElement)("h2",{className:"text-xl font-semibold text-gray-900"},(0,o.__)("Connection","reviewapp-reviews")),(0,e.createElement)(c,{status:t?.connection_status,storeId:t?.store_id})),(0,e.createElement)("div",{className:"px-6 py-5 space-y-6"},a?(0,e.createElement)("div",{className:"space-y-4"},(0,e.createElement)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex items-start"},(0,e.createElement)("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("h3",{className:"text-sm font-medium text-green-800"},(0,o.__)("Your store is connected","reviewapp-reviews")),t.store_id&&(0,e.createElement)("p",{className:"text-sm text-green-700 mt-1"},(0,o.__)("Store ID:","reviewapp-reviews")," ",(0,e.createElement)("code",{className:"font-mono"},t.store_id))))),(0,e.createElement)("button",{type:"button",onClick:async()=>{if(confirm((0,o.__)("Are you sure you want to disconnect from ReviewApp?","reviewapp-reviews")))try{await r({store_token:""})}catch(e){}},disabled:n,className:"inline-flex items-center justify-center px-4 py-2 bg-red-50 hover:bg-red-100 text-red-700 text-sm border border-red-200 hover:border-red-300 rounded shadow-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",style:{boxShadow:"none"}},(0,o.__)("Disconnect","reviewapp-reviews"))):(0,e.createElement)("div",{className:"text-center py-8"},(0,e.createElement)("div",{className:"mx-auto w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mb-4"},(0,e.createElement)("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,e.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"}))),(0,e.createElement)("h3",{className:"text-lg font-medium text-gray-900 mb-2"},(0,o.__)("Connect to ReviewApp","reviewapp-reviews")),(0,e.createElement)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto"},(0,o.__)("Start collecting and displaying reviews by connecting your store to ReviewApp","reviewapp-reviews")),(0,e.createElement)(s.Button,{variant:"primary",onClick:()=>{const e=document.createElement("form");e.method="POST",e.action=window.reviewappAdmin?.ajaxUrl||"/wp-admin/admin-ajax.php";const r=document.createElement("input");r.type="hidden",r.name="action",r.value="reviewapp_start_oauth",e.appendChild(r);const n=document.createElement("input");n.type="hidden",n.name="nonce",n.value=t?.oauth_nonce||"",e.appendChild(n),document.body.appendChild(e),e.submit()},className:"!bg-indigo-600 hover:!bg-indigo-700 !text-white !px-8 !py-3 !text-base !h-auto !font-medium"},(0,o.__)("Connect Now","reviewapp-reviews")))))}function m(){return(0,e.createElement)("div",{className:"flex items-center justify-center min-h-screen"},(0,e.createElement)("div",{className:"text-center"},(0,e.createElement)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),(0,e.createElement)("p",{className:"mt-4 text-gray-600"},(0,o.__)("Loading...","reviewapp-reviews"))))}function p(){const[r,n]=(0,t.useState)(null),[s,i]=(0,t.useState)(!0),[l,c]=(0,t.useState)(!1),[p,u]=(0,t.useState)(null);(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{const e=await a()({path:"/reviewapp/v1/settings"});n(e),u(null)}catch(e){console.error("Failed to load settings:",e),u(e.message||(0,o.__)("Failed to load settings","reviewapp-reviews"))}finally{i(!1)}};return s?(0,e.createElement)(m,null):(0,e.createElement)("div",{className:"max-w-4xl mx-auto py-8"},(0,e.createElement)("header",{className:"mb-8"},(0,e.createElement)("h1",{className:"text-3xl font-bold text-gray-900"},(0,o.__)("ReviewApp Settings","reviewapp-reviews")),(0,e.createElement)("p",{className:"mt-2 text-gray-600"},(0,o.__)("Connect your WooCommerce store to ReviewApp for advanced review collection and display.","reviewapp-reviews"))),p&&(0,e.createElement)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4"},(0,e.createElement)("div",{className:"flex"},(0,e.createElement)("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},(0,e.createElement)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})),(0,e.createElement)("div",{className:"ml-3"},(0,e.createElement)("p",{className:"text-sm text-red-800"},p)))),(0,e.createElement)(d,{settings:r,onSave:async e=>{c(!0),u(null);try{const t=await a()({path:"/reviewapp/v1/settings",method:"POST",data:e});n(t)}catch(e){throw u(e.message||(0,o.__)("Failed to save settings","reviewapp-reviews")),e}finally{c(!1)}},saving:l}))}document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("reviewapp-settings-root");r&&(0,t.render)((0,e.createElement)(p,null),r)})})()})();